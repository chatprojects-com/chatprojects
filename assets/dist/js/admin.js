import{m as t}from"./alpine-core-B3GESKiv.js";/* empty css             */t.data("settingsForm",()=>({saving:!1,testingConnection:!1,apiKey:"",provider:"openai",async saveSettings(){var t,n,o;this.saving=!0;try{const o=new FormData(this.$refs.form);o.append("action","chatpr_save_settings"),o.append("nonce",chatprData.nonce);const s=await fetch(chatprData.ajax_url,{method:"POST",body:o}),e=await s.json();e.success?null==(t=window.VPToast)||t.success("Settings saved successfully"):null==(n=window.VPToast)||n.error(e.data||"Failed to save settings")}catch(s){console.error("Error saving settings:",s),null==(o=window.VPToast)||o.error("Failed to save settings")}finally{this.saving=!1}},async testConnection(){var t,n,o,s;if(this.apiKey){this.testingConnection=!0;try{const t=await fetch(chatprData.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"chatpr_test_connection",nonce:chatprData.nonce,api_key:this.apiKey,provider:this.provider})}),s=await t.json();s.success?null==(n=window.VPToast)||n.success("Connection successful!"):null==(o=window.VPToast)||o.error(s.data||"Connection failed")}catch(e){console.error("Error testing connection:",e),null==(s=window.VPToast)||s.error("Connection test failed")}finally{this.testingConnection=!1}}else null==(t=window.VPToast)||t.warning("Please enter an API key first")}})),t.data("assistantInstructionsModal",()=>({isOpen:!1,open(){this.isOpen=!0},close(){this.isOpen=!1}})),t.data("assistantPromptSelector",()=>({showPrompts:!1,prompts:[],loading:!1,selectedCategory:"Assistant",async loadPrompts(){var t,n;this.loading=!0,this.showPrompts=!0;try{const n=new FormData;n.append("action","chatpr_get_prompts"),n.append("nonce",(null==chatprAjax?void 0:chatprAjax.nonce)||(null==chatprData?void 0:chatprData.nonce)),n.append("category",this.selectedCategory);const o=await fetch((null==chatprAjax?void 0:chatprAjax.ajaxUrl)||(null==chatprData?void 0:chatprData.ajax_url),{method:"POST",body:n}),s=await o.json();s.success?this.prompts=s.data:null==(t=window.VPToast)||t.error("Failed to load prompts")}catch(o){console.error("Error loading prompts:",o),null==(n=window.VPToast)||n.error("Failed to load prompts")}finally{this.loading=!1}},selectPrompt(t){var n;const o=document.getElementById("chatprojects_assistant_instructions");o&&(o.value=t.content),this.showPrompts=!1,null==(n=window.VPToast)||n.success("Prompt loaded successfully")},close(){this.showPrompts=!1}})),window.Alpine=t,window._alpineStarted||(window._alpineStarted=!0,t.start()),document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("load-assistant-prompt-btn"),n=document.getElementById("assistant-instructions-info-btn");t&&t.addEventListener("click",function(){const t=new CustomEvent("open-prompt-selector");window.dispatchEvent(t)}),n&&n.addEventListener("click",function(){const t=new CustomEvent("open-instructions-info");window.dispatchEvent(t)})});
